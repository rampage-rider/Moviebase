{% extends 'base_user.html' %}
{% block head %}
    <center>
    <h1 style="font-family:fantasy;" >MOVIEBOARD<h1>
    </center>
{% endblock head %}
{% block body %}
<table class="table table-hover table-dark text-warning" style="text-align:center;">
   <thead class="active">
        <th  style="color:black;">Movie Name</th>
        <th  style="color:black;">Likes</th>
    </thead>
    {% for i in most_liked %}
    <tr data-toggle="modal" data-target="#exampleModalScrollable">
        <td>{{i[0]}}</td>
        <td>{{i[1]}}<td>
    </tr>
    {% endfor %}
</table>

 <div class="modal fade" id="exampleModalScrollable" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable" role="document">
      <div class="modal-content">
        <div class="modal-header bg-dark">
          <h5 class="modal-title" id="exampleModalScrollableTitle" >Info</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body bg-warning">
          
        </div>
        <div class="modal-footer bg-dark">
          <button type="button" class="btn btn-warning" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

<script>
    $(document).ready(function(){
        var name;
        $("tr").on("click",function(){
            name=$(this).find("td:first").text();
            $.ajax({
                url: "http://www.omdbapi.com/?t="+name+"&apikey=1dbc5c2c",
                method: "get",
                dataType:"json",
                success:function(data){
                                                                                                                     
                                $(".modal-body").html('<table class="table table-dark bg-warning text-dark"> <tr><th> Title </th><td>' + data.Title + '</td></tr>' +
                                            '<tr><th> Year</th><td>' + data.Year + '</td></tr>' +
                                            '<tr><th> Rated</th><td>' + data.Rated + '</td></tr>' +
                                            '<tr><th> Released</th><td>' + data.Released + '</td></tr>' +
                                            '<tr><th> Genre</th><td>' + data.Genre + '</td></tr>' +
                                            '<tr><th> Actors</th><td>' + data.Actors + '</td></tr>' +
                                            '<tr><th> Plot</th><td>' + data.Plot+ '</td></tr>' +
                                            '<tr><th> Language</th><td>' + data.Language + '</td></tr>' +
                                            '<tr><th> Awards</th><td>' + data.Awards+ '</td></tr></table>');                                                
                            
                         
                }
            });
            console.log(name);
        });
    });
</script>
{% endblock body %}
